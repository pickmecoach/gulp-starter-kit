#Gulp-Starter-Kit

Простая сборка на Gulp c SASS и Susy.

Для работы необходим **[Node.js](https://nodejs.org/en/)**. 

Скачайте архив или клонируйте

```bash
git clone https://github.com/pickmecoach/gulp-starter-kit.git MyApp
cd MyApp
npm install
bower install
```
В директории проекта создайте папку **build** (там же, где папка **work**). В нее будут собираться файлы проекта.

#**Фичи**

- **CSS**
	-	Autoprefixer;
	-	Оптимизация и сжатие с помощью CSSO;
	-	Удаление неиспользуемого CSS кода с помощью UNCSS;
	-	Генерация мапов (опционально);
	- Генерация критического CSS;

- **JS**
	-	Оптимизация и сжатие с Uglify.js;
	-	Ручная установка зависимостей подключения;
	-	Генерация мапов (опционально);

- **HTML**
	-	Минификация с HTMLMin;
	-	Автоматическое подключение стилей и скриптов;

- **Изображения**
	-	Оптимизация с image-min;

- **Шрифты**
	-	SASS миксин для подключения шрифтов;

#Режим разработки

Убедитесь в наличии папки **build**.

В консоли:
```bash
gulp
```
Это вызовет таск по умолчанию `default.js`.

- В режиме разработки все `.scss` файлы собираются в один `main.css` файл, добавляются префиксы и он подключается в `<head>`. Выход в `build/css`.
- Все `.js` файлы собираются в  `main.js` и подключаются в конец `<body>`. Выход в  `build/js`.

#Build mode

В консоли:
```bash
gulp build
```
-	CSS разбивается на критический и общий. Критический CSS сжимается, оптимизируется и вставляется в `<head>` через `<style>`. Общий CSS так же сжимается и подключается в конце `<body>` через скрипт. Выход общего CSS в `build/css`. Создается 2 файла `main.css` и `main.min.css`. К документу подключается **только** сжатый файл.

#Общая структура

Все исходники должны содержаться в папке `work/src` в соответствующих директориях.

-	`work/src/fonts` для хранения подключаемых шрифтов.
- `work/src/html` для `.html` документов, соответствующих отдельным страницам проекта. Для подключения шаблонов используйте вложенную папку `partials`.
-	`work/src/img` для хранения подключаемых изображений.
-	`work/src/js` для `.js` файлов. Подключаемые файлы должны находиться в папке `partials`. В файле `main.js` указываются лишь зависимости.
-	`work/src/sass` для хранения `.scss` файлов.
- В файле `package.json` содержится список npm-зависимостей и информация о сборке.
- В файле `bower.json` содержится саписок подключаемых bower-пакетов.

#gulpfile.js

Содержит конфигурации и таски сборки.
-	В `config.json` прописаны настройки некоторых плагинов, а так же пути до файлов и папок.
- В папке `tasks` содержатся `.js` файлы отдельных тасков.

#Структура директории `sass`

Файл `main.scss` должен использоваться для описания стилей всех страниц, за исключением критических (сетки, reset, normalize, стили "до сгиба"). Если вы будете разбивать стили на блоки, папка `sass/partials/blocks` как раз для этого. Подключение блоков к `main.scss` производится стандартной директивой `@import "путь до файла";`.

В папке `sass/critical` должны описываться стили критического CSS. Папка `general` для общеиспользуемых в проекте стилей, т.е. сетки(Bootstrap, Foundation и т.д.), стили layout'a, всевозможные reset и normalize. В папке `pages` описываются стили "до сгиба" для отдельных страниц. К примеру, если у вас есть страница `contact.html`, создайте в папке `pages` папку `contact` и в ней файл `contact-critical.scss`, где опишите стили "до сгиба" конкретно для этой страницы.

#Нюансы этой версии

Для корректной работы необходимо:
-	Отредактировать файл `config.json` в папке `gulpfile.js` в соответствие количеству и названиям страниц, используемых в проекте. По умолчанию подразумевается, что вы используете страницу `index.html`. В `config.json` прописаны пути для этой страницы (path.critical.index{}):
```bash
{
	"path": {
		...
		"critical": {
			...
			"index": {
				"raw": "src/sass/critical/pages/index/index_critical.scss",
				"build": "src/sass/critical/pages/index",
				"src": "src/sass/critical/pages/index/index_critical.css"
				}
...

```
Так же в самом конце `config.json` прописано свойтсво `"page_names"`, содержащее массив имён страниц, использующихся в проекте:
```bash

...
	"page_names": [
		"index"
	]
}
```

При добавлении страницы в проект необходимо:
- Создать папку с именем страницы по пути `src/sass/critical/pages/<имя-страницы>` c файлом `<имя-страницы>_critical.scss`. К примеру, папку `contact` с файлом `contact_critical.scss`.
-	Прописать в `config.json` необходимые пути. Например, для страницы с названием `contact`:
```bash
{
	"path": {
		...
		"critical": {
			...
			"index": {
				"raw": "src/sass/critical/pages/index/index_critical.scss",
				"build": "src/sass/critical/pages/index",
				"src": "src/sass/critical/pages/index/index_critical.css"
				},
			"contact": {
				"raw": "src/sass/critical/pages/contact/contact_critical.scss",
				"build": "src/sass/critical/pages/contact",
				"src": "src/sass/critical/pages/contact/contact_critical.css"
				}
...

```
и в конце `config.json` добавить в массив имен страниц проекта `page_names`:
```bash

...
	"page_names": [
		"index",
		"contact"
	]
}

```

**Автоматизация этого процесса будет добавлена в следующих версиях**