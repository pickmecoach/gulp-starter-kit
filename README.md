#Gulp-Starter-Kit

Простая сборка на Gulp c SASS и Susy.

Для работы необходим **[Node.js](https://nodejs.org/en/)**. 

Скачайте архив или клонируйте

```bash
git clone https://github.com/pickmecoach/gulp-starter-kit.git MyApp
cd MyApp
npm install
bower install
```
В директории проекта создайте папку **build** (там же, где папка **work**). В нее будут собираться файлы проекта.

#**Фичи**

- **CSS**
	-	Autoprefixer;
	-	Оптимизация и сжатие с помощью CSSO;
	-	Удаление неиспользуемого CSS кода с помощью UNCSS;
	-	Генерация мапов (опционально);
	- Генерация критического CSS;

- **JS**
	-	Оптимизация и сжатие с Uglify.js;
	-	Ручная установка зависимостей подключения;
	-	Генерация мапов (опционально);

- **HTML**
	-	Минификация с HTMLMin;
	-	Автоматическое подключение стилей и скриптов;

- **Изображения**
	-	Оптимизация с image-min;

- **Шрифты**
	-	SASS миксин для подключения шрифтов;

#Режим разработки

Убедитесь в наличии папки **build**.

В консоли:
```bash
gulp
```
Это вызовет таск по умолчанию `default.js`.

- В режиме разработки все `.scss` файлы собираются в один `main.css` файл, добавляются префиксы и он подключается в `<head>`. Выход в `build/css`.
- Все `.js` файлы собираются в  `main.js` и подключаются в конец `<body>`. Выход в  `build/js`.

#Build mode

В консоли:
```bash
gulp build
```
-	CSS разбивается на критический и общий. Критический CSS сжимается, оптимизируется и вставляется в `<head>` через `<style>`. Общий CSS так же сжимается и подключается в конце `<body>` через скрипт. Выход общего CSS в `build/css`. Создается 2 файла `main.css` и `main.min.css`. К документу подключается **только** сжатый файл.

#Общая структура

Все исходники должны содержаться в папке `work/src` в соответствующих директориях.

-	`work/src/fonts` для хранения подключаемых шрифтов.
- `work/src/html` для `.html` документов, соответствующих отдельным страницам проекта. Для подключения шаблонов используйте вложенную папку `partials`.
-	`work/src/img` для хранения подключаемых изображений.
-	`work/src/js` для `.js` файлов. Подключаемые файлы должны находиться в папке `partials`. В файле `main.js` указываются лишь зависимости.
-	`work/src/sass` для хранения `.scss` файлов.
- В файле `package.json` содержится список npm-зависимостей и информация о сборке.
- В файле `bower.json` содержится список подключаемых bower-пакетов.

#gulpfile.js

Содержит конфигурации и таски сборки.
-	В `config.json` прописаны настройки некоторых плагинов, а так же пути до файлов и папок.
- В папке `tasks` содержатся `.js` файлы отдельных тасков.

#Структура директории `sass`

Файл `main.scss` должен использоваться для описания стилей всех страниц, за исключением критических (сетки, reset, normalize, стили "до сгиба"). Если вы будете разбивать стили на блоки, папка `sass/partials/blocks` как раз для этого. Подключение блоков к `main.scss` производится стандартной директивой `@import "путь до файла";`.

В папке `sass/critical` должны описываться стили критического CSS. Папка `general` для общеиспользуемых в проекте стилей, т.е. сетки(Bootstrap, Foundation и т.д.), стили layout'a, всевозможные reset и normalize. В папке `pages` описываются стили "до сгиба" для отдельных страниц.

##Изменения в версии 0.2.0

#Добавление/удаление новых страниц в проект

Если необходимо добавить новые страницы в проект(страница `index.html` добавлена по умолчанию), необходимо создать файл `.html` с нужным именем для страницы в папке `work/src/html`. Она будет проиндексирована сборщиком при запуске(`gulp`), либо во время его выполнения. После создания нужного файла, будет автоматически создана папка по пути `work/src/sass/critical/pages/<имя-созданного-файла>`, а в ней файл с именем `<имя-созданного-файла>_critical.scss`, где следует описывать стили "до сгиба" только что созданной страницы. Этот файл уже будет содержать импорт на файлы из папки `src/sass/partials/base`. Нужные пути, фигурирующие при сборке проекта так же будут автоматически добавлены в файл `config.json`.

При удалении страницы из проекта удалите файл `.html` из папки `work/src/html`. При этом соответствующие файлы и папки с критическим CSS удалены не будут. Если они больше не потребуются, удалите их вручную.

#Подключение стилей и скриптов

**Подлючение стилей в режиме разработки**

Для подключения стилей в режиме разработки в новой странице необходимо разместить в `<head>` следующий код:

```bash
<!-- main-dev:css -->
<!-- endinject -->
```
Это подключит через тег `<link>` все стили, объединенные в `main.css` файл.

**Подлючение стилей в build mode**

Для подключения стилей при окончательной сборке необходимо разместить в `<head>` следующий код:

```bash
<!-- [имя-страницы-без-расширения]:css -->
<!-- endinject -->
```
Это подключит через тег `<style>` стили критического CSS.

Так же необходимо добавить следующий код перед закрывающим тегом `</body>`:

```bash
<!-- main-prod:css -->
<!-- endinject -->
```
Это добавит скрипт, подключающий стили общего общего для всех страниц CSS.

**Подключение скриптов**

Подключение скриптов не отличается от режима сборки. Перед закрывающим тегом `</body>` разместите следующий код:

```bash
<!-- main:js -->
<!-- endinject -->
```

